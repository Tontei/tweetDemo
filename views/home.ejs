<% include("partials/header"); %>
<link rel="stylesheet" href="app.css">
<link rel="stylesheet" href="style.css">

<div class="container my-container">

    <h1><%= userName %></h1>

    <div class="tweetForm">
        <form action="/home" method="POST">

            <div class="row">
                <div class="col-sm-12">
                    <textarea name="tweet" class="form-control" rows="3" cols="100" required></textarea>
                </div>
                <div class="col-sm-12">
                    <button class="btn btn-lg btn-primary" type="submit">Tweet</button>
                </div>
            </div>

        </form>
    </div>

    <div>
        <table class="table">

            <% tweets.forEach((tweet) => { %>
                <% let writer = tweets[tweets.length - tweets.indexOf(tweet) - 1].writer %> 
                <% let tweetMessage =  tweets[tweets.length - tweets.indexOf(tweet) - 1].tweet %> 
            <tr>
                <td>
                    <%= writer %>
                </td>
                <td>
                    <%= tweetMessage %>
                </td>
                <% if (writer != userName)  {%>
                <% if (!myself.following.includes(writer)) { %>
                <td>
                    <a class="btn btn-primary"
                        href="/follow/<%=writer%>"
                        role="button">follow</a>
                </td>
                <% } else {%>
                    <td>
                        <a class="btn btn-primary"
                            href="/unfollow/<%=writer%>"
                            role="button">unfollow</a>
                    </td>
                <% } %> 
                <% } %>
            </tr>
            <% }); %>

        </table>
    </div>
</div>





<% include("partials/footer") %>